#!/usr/bin/env python3
"""
ν•κµ­μ–΄ μ—¬ν–‰ μ±—λ΄‡μ„ μ„ν• λ°μ΄ν„°μ…‹ μƒμ„± μ¤ν¬λ¦½νΈ
"""

import json
import random

def create_travel_dataset():
    """μ—¬ν–‰ μ±—λ΄‡μ© λ°μ΄ν„°μ…‹ μƒμ„±"""
    
    # κΈ°λ³Έ μ—¬ν–‰ λ°μ΄ν„°
    travel_data = []
    
    # 1. λ„μ‹λ³„ μ—¬ν–‰ μΌμ • λ°μ΄ν„°
    cities = {
        "μ„μΈ": {
            "attractions": ["κ²½λ³µκ¶", "λ‚¨μ‚°νƒ€μ›", "ν™λ€", "λ…λ™", "κ°•λ‚¨", "μ΄νƒμ›", "ν•κ°•κ³µμ›"],
            "foods": ["κΉ€μΉμ°κ°", "λ¶κ³ κΈ°", "μ‚Όκ²Ήμ‚΄", "μΉν‚¨", "λ–΅λ³¶μ΄", "μλ€", "κ°λΉ„"],
            "transport": ["μ§€ν•μ² ", "λ²„μ¤", "νƒμ‹", "λ„λ³΄"]
        },
        "λ¶€μ‚°": {
            "attractions": ["ν•΄μ΄λ€", "κ΄‘μ•λ€κµ", "κ°μ²λ¬Έν™”λ§μ„", "νƒμΆ…λ€", "μ©λ‘μ‚°κ³µμ›"],
            "foods": ["ν", "λ°€λ©΄", "λΌμ§€κµ­λ°¥", "λ‹­λ³¶μνƒ•", "κ³ κµ¬λ§", "μ–΄λ¬µ"],
            "transport": ["μ§€ν•μ² ", "λ²„μ¤", "νƒμ‹", "λ„λ³΄"]
        },
        "μ μ£Όλ„": {
            "attractions": ["μ„±μ‚°μΌμ¶λ΄‰", "λ§μ¥κµ΄", "μ²μ§€μ—°ν­ν¬", "ν•λΌμ‚°", "μ„±μ‚°μΌμ¶λ΄‰"],
            "foods": ["ν‘λΌμ§€", "ν", "κ°μΉ", "μ „λ³µ", "ν•λΌλ΄‰", "κ°κ·¤"],
            "transport": ["λ ν„°μΉ΄", "λ²„μ¤", "νƒμ‹", "λ„λ³΄"]
        },
        "κ²½μ£Ό": {
            "attractions": ["λ¶κµ­μ‚¬", "μ„κµ΄μ•”", "μ²¨μ„±λ€", "μ•μ••μ§€", "κ²½μ£Όμ›”λ“"],
            "foods": ["κ²½μ£ΌλΉµ", "ν™©λ‚¨λΉµ", "λ³΄λ¬ΈνΈμ", "ν•μ°", "λ‹­λ³¶μνƒ•"],
            "transport": ["λ²„μ¤", "νƒμ‹", "λ„λ³΄"]
        },
        "μ „μ£Ό": {
            "attractions": ["ν•μ¥λ§μ„", "μ „μ£Όμ„±", "κ²½κΈ°μ „", "μ „μ£Όν–¥κµ", "λ•μ§„κ³µμ›"],
            "foods": ["λΉ„λΉ”λ°¥", "μ½©λ‚λ¬Όκµ­λ°¥", "μ „μ£Όν•μ¥λ§μ„", "λ§‰κ±Έλ¦¬", "μ „μ£ΌλΉµ"],
            "transport": ["λ²„μ¤", "νƒμ‹", "λ„λ³΄"]
        }
    }
    
    # 2. μ§λ¬Έ-λ‹µλ³€ μ μƒμ„±
    for city, info in cities.items():
        # κΈ°λ³Έ μ—¬ν–‰ μ •λ³΄
        travel_data.append({
            "instruction": f"{city} μ—¬ν–‰ μ¶”μ²ν•΄μ£Όμ„Έμ”",
            "output": f"{city} μ—¬ν–‰ μ¶”μ²λ“λ¦½λ‹λ‹¤!\n\n### Day 1\n08:00 μ•„μΉ¨: {city} λ„μ°© λ° νΈν…” μ²΄ν¬μΈ\n12:00 μ μ‹¬: {random.choice(info['foods'])} λ§›μ§‘ λ°©λ¬Έ\n18:00 μ €λ…: {random.choice(info['attractions'])} κ΄€κ΄‘\n\n### Day 2\n08:00 μ•„μΉ¨: {random.choice(info['attractions'])} λ°©λ¬Έ\n12:00 μ μ‹¬: {random.choice(info['foods'])} μ²΄ν—\n18:00 μ €λ…: {random.choice(info['attractions'])} μ•Όκ²½ κ°μƒ\n\nκµν†µνΈ: {random.choice(info['transport'])} μ΄μ©μ„ κ¶μ¥ν•©λ‹λ‹¤."
        })
        
        # μμ‹ νΉν™” μ—¬ν–‰
        travel_data.append({
            "instruction": f"{city} μμ‹ μ—¬ν–‰ κ³„ν μ„Έμ›μ£Όμ„Έμ”",
            "output": f"{city} μμ‹ μ—¬ν–‰ κ³„νμ…λ‹λ‹¤!\n\n### Day 1\n08:00 μ•„μΉ¨: {random.choice(info['foods'])} μ•„μΉ¨ μ‹μ‚¬\n12:00 μ μ‹¬: {random.choice(info['foods'])} μ „λ¬Έμ \n18:00 μ €λ…: {random.choice(info['foods'])} λ§›μ§‘\n\n### Day 2\n08:00 μ•„μΉ¨: {random.choice(info['foods'])} λΈλ°μΉ\n12:00 μ μ‹¬: {random.choice(info['foods'])} ν„μ§€ λ§›μ§‘\n18:00 μ €λ…: {random.choice(info['foods'])} μ €λ… μ‹μ‚¬\n\n{city}μ λ€ν‘ μμ‹λ“¤μ„ μ²΄ν—ν•  μ μλ” μΌμ •μ…λ‹λ‹¤."
        })
        
        # λ¬Έν™” κ΄€κ΄‘
        travel_data.append({
            "instruction": f"{city} λ¬Έν™” κ΄€κ΄‘ μΌμ • μ¶”μ²ν•΄μ£Όμ„Έμ”",
            "output": f"{city} λ¬Έν™” κ΄€κ΄‘ μΌμ •μ…λ‹λ‹¤!\n\n### Day 1\n08:00 μ•„μΉ¨: {random.choice(info['attractions'])} λ°©λ¬Έ\n12:00 μ μ‹¬: κ·Όμ² {random.choice(info['foods'])} λ§›μ§‘\n18:00 μ €λ…: {random.choice(info['attractions'])} μ•Όκ²½\n\n### Day 2\n08:00 μ•„μΉ¨: {random.choice(info['attractions'])} κ΄€κ΄‘\n12:00 μ μ‹¬: {random.choice(info['foods'])} μ²΄ν—\n18:00 μ €λ…: {random.choice(info['attractions'])} λ¬Έν™” μ²΄ν—\n\n{city}μ μ—­μ‚¬μ™€ λ¬Έν™”λ¥Ό μ²΄ν—ν•  μ μλ” μΌμ •μ…λ‹λ‹¤."
        })
    
    # 3. μΌλ°μ μΈ μ—¬ν–‰ μ§λ¬Έλ“¤
    general_questions = [
        {
            "instruction": "ν•κµ­ μ—¬ν–‰ μ¶”μ²ν•΄μ£Όμ„Έμ”",
            "output": "ν•κµ­ μ—¬ν–‰ μ¶”μ²λ“λ¦½λ‹λ‹¤!\n\n### μΈκΈ° μ—¬ν–‰μ§€\n1. μ„μΈ - ν„λ€μ™€ μ „ν†µμ΄ κ³µμ΅΄ν•λ” λ„μ‹\n2. λ¶€μ‚° - λ°”λ‹¤μ™€ μ‚°μ΄ μ–΄μ°λ¬μ§„ ν•­κµ¬λ„μ‹\n3. μ μ£Όλ„ - μ•„λ¦„λ‹¤μ΄ μμ—°κ³Ό λ…νΉν• λ¬Έν™”\n4. κ²½μ£Ό - μ—­μ‚¬μ λ„μ‹, μ‹ λΌ λ¬Έν™” μ²΄ν—\n5. μ „μ£Ό - μ „ν†µ ν•μ¥λ§μ„κ³Ό λ§›μ§‘\n\n### μ¶”μ² μΌμ •\n- μ„μΈ: 3-4μΌ (λ„μ‹ κ΄€κ΄‘, μ‡Όν•‘, μμ‹)\n- λ¶€μ‚°: 2-3μΌ (ν•΄λ³€, ν•΄μ‚°λ¬Ό, λ¬Έν™”)\n- μ μ£Όλ„: 3-4μΌ (μμ—°, λ“λΌμ΄λΈ, ν΄μ–‘)\n\nκµν†µνΈ: KTX, ν•­κ³µνΈ, κ³ μ†λ²„μ¤ μ΄μ©μ„ κ¶μ¥ν•©λ‹λ‹¤."
        },
        {
            "instruction": "ν•κµ­ μμ‹ μ—¬ν–‰ μ¶”μ²ν•΄μ£Όμ„Έμ”",
            "output": "ν•κµ­ μμ‹ μ—¬ν–‰ μ¶”μ²λ“λ¦½λ‹λ‹¤!\n\n### μ§€μ—­λ³„ λ€ν‘ μμ‹\n- μ„μΈ: κΉ€μΉμ°κ°, λ¶κ³ κΈ°, μ‚Όκ²Ήμ‚΄\n- λ¶€μ‚°: ν, λ°€λ©΄, λΌμ§€κµ­λ°¥\n- μ μ£Όλ„: ν‘λΌμ§€, ν, κ°μΉ\n- κ²½μ£Ό: κ²½μ£ΌλΉµ, ν™©λ‚¨λΉµ, ν•μ°\n- μ „μ£Ό: λΉ„λΉ”λ°¥, μ½©λ‚λ¬Όκµ­λ°¥, λ§‰κ±Έλ¦¬\n\n### μ¶”μ² μΌμ •\nDay 1: μ„μΈ - μ „ν†µ ν•μ‹ μ²΄ν—\nDay 2: λ¶€μ‚° - ν•΄μ‚°λ¬Ό λ§›μ§‘ ν¬μ–΄\nDay 3: μ μ£Όλ„ - ν„μ§€ νΉμ‚°λ¬Ό μ²΄ν—\n\nκ° μ§€μ—­μ λ€ν‘ μμ‹μ„ μ²΄ν—ν•  μ μλ” μΌμ •μ…λ‹λ‹¤."
        },
        {
            "instruction": "ν•κµ­ 3μΌ μ—¬ν–‰ κ³„ν μ„Έμ›μ£Όμ„Έμ”",
            "output": "ν•κµ­ 3μΌ μ—¬ν–‰ κ³„νμ…λ‹λ‹¤!\n\n### Day 1: μ„μΈ\n08:00 μ•„μΉ¨: μΈμ²κ³µν•­ λ„μ°©\n12:00 μ μ‹¬: κΉ€μΉμ°κ° λ§›μ§‘\n18:00 μ €λ…: κ²½λ³µκ¶ μ•Όκ²½\n\n### Day 2: λ¶€μ‚°\n08:00 μ•„μΉ¨: KTXλ΅ λ¶€μ‚° μ΄λ™\n12:00 μ μ‹¬: ν•΄μ΄λ€ ν λ§›μ§‘\n18:00 μ €λ…: κ΄‘μ•λ€κµ μ•Όκ²½\n\n### Day 3: μ μ£Όλ„\n08:00 μ•„μΉ¨: ν•­κ³µνΈμΌλ΅ μ μ£Ό μ΄λ™\n12:00 μ μ‹¬: ν‘λΌμ§€ λ§›μ§‘\n18:00 μ €λ…: μ„±μ‚°μΌμ¶λ΄‰\n\nκµν†µνΈ: KTX, ν•­κ³µνΈ, λ ν„°μΉ΄ μ΄μ©μ„ κ¶μ¥ν•©λ‹λ‹¤."
        }
    ]
    
    travel_data.extend(general_questions)
    
    # 4. νΉμ • κ΄€μ‹¬μ‚¬λ³„ μ§λ¬Έλ“¤
    interests = ["μμ‹", "λ¬Έν™”", "μμ—°", "μ‡Όν•‘", "μ—­μ‚¬"]
    for interest in interests:
        travel_data.append({
            "instruction": f"ν•κµ­ {interest} μ—¬ν–‰ μ¶”μ²ν•΄μ£Όμ„Έμ”",
            "output": f"ν•κµ­ {interest} μ—¬ν–‰ μ¶”μ²λ“λ¦½λ‹λ‹¤!\n\n### {interest} κ΄€λ ¨ μ¶”μ²μ§€\n- μ„μΈ: {interest} κ΄€λ ¨ λ…μ†λ“¤\n- λ¶€μ‚°: {interest} μ²΄ν— μ¥μ†\n- μ μ£Όλ„: {interest} κ΄€κ΄‘μ§€\n\n### μ¶”μ² μΌμ •\nDay 1: μ„μΈ {interest} μ²΄ν—\nDay 2: λ¶€μ‚° {interest} κ΄€κ΄‘\nDay 3: μ μ£Όλ„ {interest} νƒλ°©\n\nν•κµ­μ {interest}λ¥Ό κΉμ΄ μ²΄ν—ν•  μ μλ” μΌμ •μ…λ‹λ‹¤."
        })
    
    return travel_data

def save_dataset(data, filename="train.jsonl"):
    """λ°μ΄ν„°μ…‹μ„ JSONL ν•μ‹μΌλ΅ μ €μ¥"""
    with open(filename, 'w', encoding='utf-8') as f:
        for item in data:
            f.write(json.dumps(item, ensure_ascii=False) + '\n')
    print(f"λ°μ΄ν„°μ…‹μ΄ {filename}μ— μ €μ¥λμ—μµλ‹λ‹¤. (μ΄ {len(data)}κ° ν•­λ©)")

def main():
    """λ©”μΈ ν•¨μ"""
    print("π€ ν•κµ­μ–΄ μ—¬ν–‰ μ±—λ΄‡ λ°μ΄ν„°μ…‹ μƒμ„±")
    print("=" * 50)
    
    # λ°μ΄ν„°μ…‹ μƒμ„±
    dataset = create_travel_dataset()
    
    # μ €μ¥
    save_dataset(dataset)
    
    # μƒν” μ¶λ ¥
    print("\nπ“ μƒν” λ°μ΄ν„°:")
    for i, item in enumerate(dataset[:3]):
        print(f"\n--- μƒν” {i+1} ---")
        print(f"μ§λ¬Έ: {item['instruction']}")
        print(f"λ‹µλ³€: {item['output'][:100]}...")
    
    print(f"\nβ… μ΄ {len(dataset)}κ°μ μ§λ¬Έ-λ‹µλ³€ μμ΄ μƒμ„±λμ—μµλ‹λ‹¤.")
    print("μ΄μ  llama3_finetune_lora.pyλ¥Ό μ‹¤ν–‰ν•μ—¬ λ¨λΈμ„ ν•™μµμ‹ν‚¬ μ μμµλ‹λ‹¤!")

if __name__ == "__main__":
    main() 